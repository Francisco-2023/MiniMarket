{% extends 'base.html' %}
{% block title %}ðŸ“Š Historial de Ventas{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4 text-primary">ðŸ“Š Historial de Ventas</h2>

  <ul class="nav nav-tabs" id="ventasTabs" role="tablist">
    <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#dia">Por DÃ­a</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#mes">Por Mes</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#anio">Por AÃ±o</button></li>
  </ul>

  <div class="tab-content mt-4">
    <!-- DÃ­a -->
    <div class="tab-pane fade show active" id="dia">
      {% for fecha, datos in resumen_dia.items() %}
        <div class="card mb-3">
          <div class="card-header bg-light">
            <strong>{{ fecha }}</strong> | Total: ${{ '%.2f'|format(datos.total) }} | Productos: {{ datos.cantidad }}
          </div>
          <div class="card-body">
            <ul>
              {% for venta in datos.ventas %}
                <li>
                  ID: {{ venta.id }} | Cliente: {{ venta.usuario }} | Total: ${{ venta.total }}
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Mes -->
    <div class="tab-pane fade" id="mes">
      {% for mes, datos in resumen_mes.items() %}
        <div class="card mb-3">
          <div class="card-header bg-light">
            <strong>{{ mes }}</strong> | Total: ${{ '%.2f'|format(datos.total) }} | Productos: {{ datos.cantidad }}
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- AÃ±o -->
    <div class="tab-pane fade" id="anio">
      {% for anio, datos in resumen_anio.items() %}
        <div class="card mb-3">
          <div class="card-header bg-light">
            <strong>{{ anio }}</strong> | Total: ${{ '%.2f'|format(datos.total) }} | Productos: {{ datos.cantidad }}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
